# Root Growth Analyzer App
This is an app for finding root tips and computing root growth rate from a series of scanned source images. This repository is originally split off from dmuiruri/root_growth_cv to host only the desktop app developed as a result of that project.
## Usage
The app is started from a Python 3.9 environment with the command
`python root_analyzer.py`
This will open a graphical user interface which has a few input options. The only required option is the input image folder, but others can be modified if needed.

Requirements for the input image files:
-   The filenames should contain date in the format YYYY.MM.DD as the underlying logic will search for it in this format
	- The files should sort alphabetically and chronologically in the same order: The easiest way is to have the date be the first differing part in the filenames
	- Example filenames:
		- hydescan1_T001_L001_2019.06.10_033029_165_DYY.jpg
		- hydescan1_T001_L001_2019.06.11_033029_166_DYY.jpg
- Input folder should contain images from within a single year
- File format has to be .jpg

## Command line use
The app can also be run only using the command line. An example would be
`python root_analyzer.py --cli --input images_folder`
The `--cli` flag is necessary for command line use.

The full options for command line are:
- `--cli`: A flag for forcing command line use. Without it, the GUI is started regardless of other command line options
- `--input <input-folder>`: Select input images folder. If the folder is in another branch in the directory tree, a full path has to be used. So instead of `--input ../images/` one has to specify e.g. `--input /Users/<username>/Documents/images/`
- `--output <output-folder>`: Output folder name is generated by default from the input folder name, but this flag can optionally be set for customization.
- `--tip-size <number>`: Optionally set minimum root tip size searched in the images (mm). Default 10.
- `--scenario <1-or-2>`: Optional flag, defaults to 2.  1 corresponds to single images analysis and 2 to root growth analysis.

## Setting up Python environment and downloading the repo
The app unfortunately doesn't have a standalone distributable version, so running it requires a Python environment. The Python version used in development has been 3.9.
### Windows

Easiest way to create a Python environment from scratch is using [anaconda](https://docs.anaconda.com/anaconda/install/windows/). When anaconda has been installed, start the Anaconda prompt (for example from the search bar). Next, navigate into the directory you want to download the repository to in the prompt. To create a new environment, use the command:
`conda create -n root_analyzer_env python=3.9 pip git`
This will create a clean environment labeled `root_analyzer_env` (or any other name you want to give) with pre-installed `pip` package manager and `git` version control system. To activate the new environment, enter
`conda activate root_analyzer_env`
Now you can download the analyzer project with the command:
`git clone https://github.com/t-kouk/root_growth_cv_app.git`
Next, change directory to the project folder and install project dependencies into the environment:
`cd root_growth_cv_app`
`pip install -r requirements.txt`
After this the program should be able to be started with the `python root_analyzer.py`command!

Afterwards, you should only need to activate the environment with `conda activate root_analyzer_env` to run the program.

### Mac and Linux
Conda is available for Mac and Linux as well, but since Python and pip are usually present already, one can also just use the default [virtual environments](https://docs.python.org/3/tutorial/venv.html). After activating your environment the steps are the same as with Windows.